<form method="post"
      action="{% url 'admin_update_config' %}"
      class="space-y-6">
  {% csrf_token %}
  <!-- Información del Restaurante -->
  <div class="bg-muted/30 border border-border rounded-lg p-6">
    <div class="flex items-center space-x-3 mb-6">
      <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5 text-primary"
             fill="none"
             stroke="currentColor"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
          </path>
        </svg>
      </div>
      <h2 class="text-xl font-bold text-foreground">Información del Restaurante</h2>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="md:col-span-2">
        <label for="id_restaurant_name"
               class="block text-sm font-medium text-foreground mb-2">Nombre del Restaurante *</label>
        <input type="text"
               name="restaurant_name"
               id="id_restaurant_name"
               value="{{ config.restaurant_name }}"
               required
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="Nombre del restaurante">
      </div>
      <div class="md:col-span-2">
        <label for="id_restaurant_address"
               class="block text-sm font-medium text-foreground mb-2">Dirección</label>
        <input type="text"
               name="restaurant_address"
               id="id_restaurant_address"
               value="{{ config.restaurant_address }}"
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="Dirección completa">
      </div>
      <div>
        <label for="id_restaurant_phone"
               class="block text-sm font-medium text-foreground mb-2">Teléfono</label>
        <input type="text"
               name="restaurant_phone"
               id="id_restaurant_phone"
               value="{{ config.restaurant_phone }}"
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="(809) 555-5555">
      </div>
      <div>
        <label for="id_restaurant_email"
               class="block text-sm font-medium text-foreground mb-2">Email</label>
        <input type="email"
               name="restaurant_email"
               id="id_restaurant_email"
               value="{{ config.restaurant_email }}"
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="correo@restaurante.com">
      </div>
    </div>
  </div>
  <!-- Configuración Fiscal -->
  <div class="bg-muted/30 border border-border rounded-lg p-6">
    <div class="flex items-center space-x-3 mb-6">
      <div class="w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5 text-accent"
             fill="none"
             stroke="currentColor"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z">
          </path>
        </svg>
      </div>
      <h2 class="text-xl font-bold text-foreground">Configuración Fiscal</h2>
    </div>
    <div class="space-y-4">
      <div>
        <label for="id_itbis_rate"
               class="block text-sm font-medium text-foreground mb-2">Tasa de ITBIS (%) *</label>
        <input type="number"
               name="itbis_rate"
               id="id_itbis_rate"
               value="{{ config.itbis_rate }}"
               required
               step="0.01"
               min="0"
               max="100"
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="18.00">
        <p class="text-xs text-muted-foreground mt-1">Ingrese el porcentaje sin el símbolo %. Ejemplo: 18.00 para 18%</p>
      </div>
      <div class="flex items-center space-x-3 bg-card p-4 rounded-lg">
        <input type="checkbox"
               name="show_tip_in_invoice"
               id="id_show_tip_in_invoice"
               {% if config.show_tip_in_invoice %}checked{% endif %}
               class="w-4 h-4 text-primary bg-input border-border rounded focus:ring-2 focus:ring-primary">
        <label for="id_show_tip_in_invoice"
               class="text-sm font-medium text-foreground cursor-pointer">Mostrar propina sugerida en facturas</label>
      </div>
      <div id="tip-rate-container"
           class="{% if not config.show_tip_in_invoice %}hidden{% endif %}">
        <label for="id_suggested_tip_rate"
               class="block text-sm font-medium text-foreground mb-2">Propina Sugerida (%)</label>
        <input type="number"
               name="suggested_tip_rate"
               id="id_suggested_tip_rate"
               value="{{ config.suggested_tip_rate }}"
               step="0.01"
               min="0"
               max="100"
               class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
               placeholder="10.00">
        <p class="text-xs text-muted-foreground mt-1">Porcentaje de propina sugerida. Ejemplo: 10.00 para 10%</p>
      </div>
    </div>
  </div>
  <!-- Configuración de Facturas -->
  <div class="bg-muted/30 border border-border rounded-lg p-6">
    <div class="flex items-center space-x-3 mb-6">
      <div class="w-10 h-10 bg-secondary/50 rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5 text-foreground"
             fill="none"
             stroke="currentColor"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
          </path>
        </svg>
      </div>
      <h2 class="text-xl font-bold text-foreground">Configuración de Facturas</h2>
    </div>
    <div>
      <label for="id_invoice_footer_message"
             class="block text-sm font-medium text-foreground mb-2">Mensaje de Pie de Página</label>
      <textarea name="invoice_footer_message"
                id="id_invoice_footer_message"
                rows="3"
                class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-foreground"
                placeholder="Mensaje de agradecimiento">{{ config.invoice_footer_message }}</textarea>
      <p class="text-xs text-muted-foreground mt-1">Mensaje que aparecerá al final de las facturas</p>
    </div>
  </div>
  <!-- Información adicional -->
  <div class="bg-accent/5 border border-accent/20 rounded-lg p-4">
    <div class="flex items-start space-x-3">
      <svg class="w-5 h-5 text-accent flex-shrink-0 mt-0.5"
           fill="none"
           stroke="currentColor"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
        </path>
      </svg>
      <div class="text-sm text-muted-foreground">
        <p class="font-medium text-foreground mb-1">Información importante:</p>
        <ul class="space-y-1 list-disc list-inside">
          <li>Estos cambios afectarán todas las futuras facturas generadas</li>
          <li>Las facturas ya generadas no se modificarán</li>
          <li>
            Última actualización: <span class="text-accent">{{ config.last_updated|date:"d/m/Y H:i" }}</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- Botones de acción -->
  <div class="flex items-center justify-end space-x-3 pt-4">
    <button type="button"
            onclick="location.reload()"
            class="bg-secondary hover:bg-secondary/80 text-secondary-foreground px-6 py-3 rounded-lg font-medium transition-all duration-200">
      Cancelar
    </button>
    <button type="submit"
            class="bg-primary hover:bg-primary/90 text-primary-foreground px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
      <span>Guardar Configuración</span>
    </button>
  </div>
</form>
<script>
  // Mostrar/ocultar campo de propina según checkbox
  document.getElementById('id_show_tip_in_invoice').addEventListener('change', function() {
    const tipRateContainer = document.getElementById('tip-rate-container');
    if (this.checked) {
      tipRateContainer.classList.remove('hidden');
    } else {
      tipRateContainer.classList.add('hidden');
    }
  });
</script>
